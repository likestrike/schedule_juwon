<!DOCTYPE html>
<html lang="ko">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover" />
    <meta name="theme-color" content="#667eea" />
    <meta name="apple-mobile-web-app-capable" content="yes" />
    <meta name="apple-mobile-web-app-status-bar-style" content="default" />
    <meta name="apple-mobile-web-app-title" content="ì•„ì´ ê³„íší‘œ" />
    <meta name="mobile-web-app-capable" content="yes" />
    
    <!-- ìºì‹± ë°©ì§€ ë©”íƒ€ íƒœê·¸ -->
    <meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate" />
    <meta http-equiv="Pragma" content="no-cache" />
    <meta http-equiv="Expires" content="0" />
    
    <title>ì•„ì´ ì£¼ê°„ ê³„íší‘œ v1.2</title>
    <style>
      * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
      }

      body {
        font-family: 'Arial', sans-serif;
        background: #ffffff;
        min-height: 100vh;
        min-height: 100dvh;
        overflow-x: hidden;
        margin: 0;
        padding: 0;
        padding-top: env(safe-area-inset-top);
        padding-bottom: env(safe-area-inset-bottom);
        padding-left: env(safe-area-inset-left);
        padding-right: env(safe-area-inset-right);
      }

      .container {
        position: relative;
        width: 100%;
        height: 100vh;
        height: 100dvh;
        overflow: hidden;
        max-height: calc(100vh - env(keyboard-inset-height, 0px));
        max-height: calc(100dvh - env(keyboard-inset-height, 0px));
      }

      .schedule-wrapper {
        display: flex;
        width: 500%;
        height: 100%;
        transition: transform 0.3s ease-in-out;
      }

      .day-schedule {
        width: 20%;
        height: 100%;
        padding: 15px;
        padding-top: max(15px, env(safe-area-inset-top));
        padding-bottom: max(15px, env(safe-area-inset-bottom) + 80px);
        display: flex;
        flex-direction: column;
        box-sizing: border-box;
      }

      .day-header {
        background: rgba(0, 0, 0, 0.8);
        border-radius: 15px;
        padding: 12px;
        margin-bottom: 15px;
        text-align: center;
        box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1);
        backdrop-filter: blur(10px);
        flex-shrink: 0;
      }

      .day-title {
        font-size: 22px;
        font-weight: bold;
        color: #ffffff;
        margin-bottom: 4px;
      }

      .day-subtitle {
        font-size: 13px;
        color: #e0e0e0;
      }

      .schedule-list {
        flex: 1;
        overflow-y: auto;
        padding-right: 8px;
        overscroll-behavior: contain;
        -webkit-overflow-scrolling: touch;
      }

      .schedule-item {
        background: #f8f9fa;
        border-radius: 12px;
        padding: 12px;
        margin-bottom: 8px;
        box-shadow: 0 4px 15px rgba(0, 0, 0, 0.08);
        backdrop-filter: blur(5px);
        transition: transform 0.2s ease;
        display: flex;
        align-items: center;
        justify-content: space-between;
        width: 100%;
        border: 1px solid #e9ecef;
      }

      .schedule-item:hover {
        transform: translateY(-2px);
        box-shadow: 0 6px 20px rgba(0, 0, 0, 0.12);
      }

      .time {
        flex: 0 0 40%;
        font-size: 14px;
        color: #495057;
        font-weight: bold;
        text-align: left;
        padding-right: 8px;
      }

      .activity {
        flex: 0 0 60%;
        font-size: 15px;
        color: #212529;
        font-weight: 500;
        text-align: left;
        padding-left: 8px;
      }

      .navigation {
        position: fixed;
        bottom: max(15px, env(safe-area-inset-bottom) + 15px);
        left: 50%;
        transform: translateX(-50%);
        display: flex;
        gap: 8px;
        z-index: 100;
      }

      .nav-dot {
        width: 12px;
        height: 12px;
        border-radius: 50%;
        background: rgba(0, 0, 0, 0.3);
        cursor: pointer;
        transition: all 0.3s ease;
      }

      .nav-dot.active {
        background: #000000;
        transform: scale(1.2);
      }

      .nav-button {
        position: fixed;
        bottom: max(70px, env(safe-area-inset-bottom) + 70px);
        width: 45px;
        height: 45px;
        border-radius: 50%;
        background: rgba(0, 0, 0, 0.7);
        border: none;
        font-size: 16px;
        color: #ffffff;
        cursor: pointer;
        z-index: 1000;
        transition: all 0.3s ease;
        display: flex;
        align-items: center;
        justify-content: center;
        backdrop-filter: blur(10px);
        box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);
        touch-action: manipulation;
        user-select: none;
      }

      .nav-button:hover {
        background: rgba(0, 0, 0, 0.8);
        transform: scale(1.1);
      }

      .nav-button:active {
        transform: scale(0.95);
      }

      .nav-button-left {
        left: max(15px, env(safe-area-inset-left) + 15px);
      }

      .nav-button-right {
        right: max(15px, env(safe-area-inset-right) + 15px);
      }

      .loading {
        display: flex;
        justify-content: center;
        align-items: center;
        height: 100vh;
        color: #333333;
        font-size: 18px;
      }

      .error {
        display: flex;
        justify-content: center;
        align-items: center;
        height: 100vh;
        color: #dc3545;
        font-size: 16px;
        text-align: center;
        padding: 20px;
      }

      /* í’€ìŠ¤í¬ë¦° ëª¨ë“œë¥¼ ìœ„í•œ ì¶”ê°€ ìŠ¤íƒ€ì¼ */
      @media (display-mode: fullscreen) {
        .container {
          height: 100vh;
          height: 100dvh;
        }
      }

      @media (display-mode: standalone) {
        .container {
          height: 100vh;
          height: 100dvh;
        }
      }

      /* ì‘ì€ í™”ë©´ ìµœì í™” */
      @media (max-height: 600px) {
        .day-header {
          padding: 8px;
          margin-bottom: 10px;
        }

        .day-title {
          font-size: 18px;
        }

        .day-subtitle {
          font-size: 11px;
        }

        .schedule-item {
          padding: 8px 10px;
          margin-bottom: 6px;
        }

        .time {
          font-size: 11px;
        }

        .activity {
          font-size: 13px;
        }
      }

      .schedule-list::-webkit-scrollbar {
        width: 4px;
      }

      .schedule-list::-webkit-scrollbar-track {
        background: rgba(0, 0, 0, 0.1);
        border-radius: 2px;
      }

      .schedule-list::-webkit-scrollbar-thumb {
        background: rgba(0, 0, 0, 0.3);
        border-radius: 2px;
      }

      /* í˜„ì¬ ì‹œê°„ í•˜ì´ë¼ì´íŠ¸ */
      .current-time {
        background: linear-gradient(135deg, #ff6b6b, #ee5a5a) !important;
        border: 3px solid #ff4757 !important;
        box-shadow: 0 8px 30px rgba(255, 71, 87, 0.4) !important;
      }

      .current-time .time {
        color: #000 !important;
        font-weight: bold;
      }

      .current-time .activity {
        color: #000 !important;
        font-weight: bold;
      }

      @keyframes pulse {
        0% {
          box-shadow: 0 8px 30px rgba(255, 71, 87, 0.4);
        }
        50% {
          box-shadow: 0 12px 35px rgba(255, 71, 87, 0.6);
          transform: scale(1.08);
        }
        100% {
          box-shadow: 0 8px 30px rgba(255, 71, 87, 0.4);
        }
      }

      /* ì˜¤ì „/ì˜¤í›„ ì‹œê°„ëŒ€ë³„ ìƒ‰ìƒ ë° í™œë™ë³„ ìƒ‰ìƒ */
      .morning {
        background: linear-gradient(135deg, #e3f2fd, #bbdefb) !important;
      }

      .afternoon {
        background: linear-gradient(135deg, #fff3e0, #ffcc80) !important;
      }

      .evening {
        background: linear-gradient(135deg, #fce4ec, #f8bbd9) !important;
      }

      /* íŠ¹ë³„ í™œë™ ìƒ‰ìƒ */
      .meal {
        background: linear-gradient(135deg, #ffd93d, #ff9671) !important;
      }
      
      .free {
        background: linear-gradient(135deg, #74b9ff, #0984e3) !important;
        color: white !important;
      }

      .free .time {
        color: #ffffff !important;
      }

      .free .activity {
        color: #ffffff !important;
      }
    </style>
  </head>
  <body>
    <div class="loading" id="loading">ë°ì´í„°ë¥¼ ë¶ˆëŸ¬ì˜¤ëŠ” ì¤‘...</div>
    <div class="error" id="error" style="display: none;">
      ë°ì´í„°ë¥¼ ë¶ˆëŸ¬ì˜¬ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.<br>
      schedule_data.json íŒŒì¼ì„ í™•ì¸í•´ì£¼ì„¸ìš”.
    </div>

    <div class="container" id="container" style="display: none;">
      <div class="schedule-wrapper" id="scheduleWrapper">
        <!-- ë™ì ìœ¼ë¡œ ìƒì„±ë  ìŠ¤ì¼€ì¤„ ë‚´ìš© -->
      </div>

      <button class="nav-button nav-button-left" id="prevBtn">â†</button>
      <button class="nav-button nav-button-right" id="nextBtn">â†’</button>

      <div class="navigation" id="navigation">
        <!-- ë™ì ìœ¼ë¡œ ìƒì„±ë  ë„¤ë¹„ê²Œì´ì…˜ ì ë“¤ -->
      </div>
    </div>

    <script>
      let currentDay = 0;
      let totalDays = 0;
      let scheduleData = null;
      const wrapper = document.getElementById('scheduleWrapper');
      const container = document.getElementById('container');
      const loading = document.getElementById('loading');
      const error = document.getElementById('error');

      // ìŠ¤ì¼€ì¤„ ë°ì´í„° (JSON ë°ì´í„°ë¥¼ ì§ì ‘ í¬í•¨)
      const SCHEDULE_DATA = {
        "schedules": {
          "monday": {
            "title": "ì›”ìš”ì¼",
            "subtitle": "ìƒˆë¡œìš´ í•œ ì£¼ì˜ ì‹œì‘!",
            "items": [
              { "time": "05:00-06:00", "activity": "ğŸŒ… ê¸°ìƒ í›„ í™ˆëŸ°", "type": "study" },
              { "time": "06:00-06:30", "activity": "ğŸ½ï¸ ì•„ì¹¨ì‹ì‚¬", "type": "meal" },
              { "time": "06:30-07:00", "activity": "ğŸš¿ ì”»ê¸°", "type": "normal" },
              { "time": "07:00-07:30", "activity": "ğŸ“š ê³µë¶€", "type": "study" },
              { "time": "07:30-08:00", "activity": "ğŸ“– ë…ì„œ", "type": "normal" },
              { "time": "08:00-08:30", "activity": "ğŸ˜Œ íœ´ì‹", "type": "normal" },
              { "time": "08:30-09:00", "activity": "ğŸƒâ€â™‚ï¸ ìš´ë™", "type": "exercise" },
              { "time": "09:00-10:00", "activity": "ğŸ¯ ììœ ì‹œê°„", "type": "free" },
              { "time": "10:00-10:30", "activity": "ğŸ“ ì˜ì–´ë¬¸ë²•êµì¬", "type": "study" },
              { "time": "10:30-12:00", "activity": "ğŸ¬ ì˜í™”ê°ìƒ", "type": "normal" },
              { "time": "12:00-13:00", "activity": "ğŸ± ì ì‹¬, ê°„ì‹", "type": "meal" },
              { "time": "13:00-13:30", "activity": "ğŸ“– ë…ì„œ", "type": "normal" },
              { "time": "13:30-15:00", "activity": "ğŸ¯ ììœ ì‹œê°„", "type": "free" },
              { "time": "15:00-15:30", "activity": "ğŸ“ í™ˆëŸ°ìƒë‹´", "type": "normal" },
              { "time": "15:30-17:00", "activity": "ğŸ‡ºğŸ‡¸ ì†¡ê¸€ë¦¬ì‹œ", "type": "study" },
              { "time": "17:00-17:30", "activity": "âœï¸ ìˆ™ì œí•˜ê¸°", "type": "study" },
              { "time": "17:30-18:30", "activity": "ğŸ® ê²Œì„", "type": "normal" },
              { "time": "18:30-20:00", "activity": "ğŸ½ï¸ ì €ë…ì‹ì‚¬, ì”»ê¸°", "type": "meal" },
              { "time": "20:00-05:00", "activity": "ğŸ˜´ ìˆ˜ë©´", "type": "sleep" }
            ]
          },
          "tuesday": {
            "title": "í™”ìš”ì¼",
            "subtitle": "í˜ì°¬ í•˜ë£¨!",
            "items": [
              { "time": "05:00-06:00", "activity": "ğŸŒ… ê¸°ìƒ í›„ í™ˆëŸ°", "type": "study" },
              { "time": "06:00-06:30", "activity": "ğŸ½ï¸ ì•„ì¹¨ì‹ì‚¬", "type": "meal" },
              { "time": "06:30-07:00", "activity": "ğŸš¿ ì”»ê¸°", "type": "normal" },
              { "time": "07:00-07:30", "activity": "ğŸ“š ê³µë¶€", "type": "study" },
              { "time": "07:30-08:00", "activity": "ğŸ“– ë…ì„œ", "type": "normal" },
              { "time": "08:00-08:30", "activity": "ğŸ˜Œ íœ´ì‹", "type": "normal" },
              { "time": "08:30-09:00", "activity": "ğŸƒâ€â™‚ï¸ ìš´ë™", "type": "exercise" },
              { "time": "09:00-10:30", "activity": "ğŸ¯ ììœ ì‹œê°„", "type": "free" },
              { "time": "10:30-11:30", "activity": "ğŸ® ê²Œì„", "type": "normal" },
              { "time": "11:30-12:00", "activity": "ğŸ± ë¼ì¦ˆí‚¤ì¦ˆ", "type": "study" },
              { "time": "12:00-13:00", "activity": "ğŸ± ì ì‹¬, ê°„ì‹", "type": "meal" },
              { "time": "13:00-15:00", "activity": "ğŸ¯ ììœ ì‹œê°„", "type": "free" },
              { "time": "15:00-16:00", "activity": "ğŸ¨ ë¯¸ìˆ ", "type": "normal" },
              { "time": "16:00-16:30", "activity": "ğŸ“– ë…ì„œ", "type": "normal" },
              { "time": "16:30-20:00", "activity": "ğŸ½ï¸ ì €ë…ì‹ì‚¬, ì”»ê¸°", "type": "meal" },
              { "time": "20:00-05:00", "activity": "ğŸ˜´ ìˆ˜ë©´", "type": "sleep" }
            ]
          },
          "wednesday": {
            "title": "ìˆ˜ìš”ì¼",
            "subtitle": "ì¤‘ê°„ì  íŒŒì´íŒ…!",
            "items": [
              { "time": "05:00-06:00", "activity": "ğŸŒ… ê¸°ìƒ í›„ í™ˆëŸ°", "type": "study" },
              { "time": "06:00-06:30", "activity": "ğŸ½ï¸ ì•„ì¹¨ì‹ì‚¬", "type": "meal" },
              { "time": "06:30-07:00", "activity": "ğŸš¿ ì”»ê¸°", "type": "normal" },
              { "time": "07:00-07:30", "activity": "ğŸ“š ê³µë¶€", "type": "study" },
              { "time": "07:30-08:00", "activity": "ğŸ“– ë…ì„œ", "type": "normal" },
              { "time": "08:00-08:30", "activity": "ğŸ˜Œ íœ´ì‹", "type": "normal" },
              { "time": "08:30-09:00", "activity": "ğŸƒâ€â™‚ï¸ ìš´ë™", "type": "exercise" },
              { "time": "09:00-10:00", "activity": "ğŸ¯ ììœ ì‹œê°„", "type": "free" },
              { "time": "10:00-10:30", "activity": "ğŸ“š ì˜ì–´ì±…ì œì‘", "type": "study" },
              { "time": "10:30-11:30", "activity": "ğŸˆ ì—”íŠ¸ë¦¬", "type": "normal" },
              { "time": "11:30-12:00", "activity": "ğŸ˜Œ íœ´ì‹", "type": "normal" },
              { "time": "12:00-13:00", "activity": "ğŸ± ì ì‹¬, ê°„ì‹", "type": "meal" },
              { "time": "13:00-15:30", "activity": "ğŸ¯ ììœ ì‹œê°„", "type": "free" },
              { "time": "15:30-17:00", "activity": "ğŸ‡ºğŸ‡¸ ì†¡ê¸€ë¦¬ì‹œ", "type": "study" },
              { "time": "17:00-17:30", "activity": "âœï¸ ìˆ™ì œí•˜ê¸°", "type": "study" },
              { "time": "17:30-18:30", "activity": "ğŸ® ê²Œì„", "type": "normal" },
              { "time": "18:30-20:00", "activity": "ğŸ½ï¸ ì €ë…ì‹ì‚¬, ì”»ê¸°", "type": "meal" },
              { "time": "20:00-05:00", "activity": "ğŸ˜´ ìˆ˜ë©´", "type": "sleep" }
            ]
          },
          "thursday": {
            "title": "ëª©ìš”ì¼",
            "subtitle": "ê±°ì˜ ë‹¤ ì™”ì–´!",
            "items": [
              { "time": "05:00-06:00", "activity": "ğŸŒ… ê¸°ìƒ í›„ í™ˆëŸ°", "type": "study" },
              { "time": "06:00-06:30", "activity": "ğŸ½ï¸ ì•„ì¹¨ì‹ì‚¬", "type": "meal" },
              { "time": "06:30-07:00", "activity": "ğŸš¿ ì”»ê¸°", "type": "normal" },
              { "time": "07:00-07:30", "activity": "ğŸ“š ê³µë¶€", "type": "study" },
              { "time": "07:30-08:00", "activity": "ğŸ“– ë…ì„œ", "type": "normal" },
              { "time": "08:00-08:30", "activity": "ğŸ˜Œ íœ´ì‹", "type": "normal" },
              { "time": "08:30-09:00", "activity": "ğŸƒâ€â™‚ï¸ ìš´ë™", "type": "exercise" },
              { "time": "09:00-10:30", "activity": "ğŸ¯ ììœ ì‹œê°„", "type": "free" },
              { "time": "10:30-11:30", "activity": "ğŸˆ ì—”íŠ¸ë¦¬", "type": "normal" },
              { "time": "11:30-12:00", "activity": "ğŸ˜Œ íœ´ì‹", "type": "normal" },
              { "time": "12:00-13:00", "activity": "ğŸ± ì ì‹¬, ê°„ì‹", "type": "meal" },
              { "time": "13:00-14:00", "activity": "ğŸ± ë¼ì¦ˆí‚¤ì¦ˆ&íœ´ì‹", "type": "study" },
              { "time": "14:00-14:30", "activity": "ğŸ  ë³¸ê²©! ì•„íŒŒíŠ¸íƒë°©", "type": "normal" },
              { "time": "14:30-16:00", "activity": "ğŸ¯ ììœ ì‹œê°„", "type": "free" },
              { "time": "16:20-17:20", "activity": "ğŸ® ê²Œì„", "type": "normal" },
              { "time": "17:20-18:00", "activity": "ğŸˆ ë†€ê¸°", "type": "free" },
              { "time": "18:00-19:00", "activity": "ğŸ§  ì‹±í¬ë¹…", "type": "study" },
              { "time": "19:00-20:00", "activity": "ğŸ½ï¸ ì €ë…ì‹ì‚¬, ì”»ê¸°", "type": "meal" },
              { "time": "20:00-05:00", "activity": "ğŸ˜´ ìˆ˜ë©´", "type": "sleep" }
            ]
          },
          "friday": {
            "title": "ê¸ˆìš”ì¼",
            "subtitle": "ì£¼ë§ì´ ì™”ì–´ìš”! ğŸ‰",
            "items": [
              { "time": "05:00-06:00", "activity": "ğŸŒ… ê¸°ìƒ í›„ í™ˆëŸ°", "type": "study" },
              { "time": "06:00-06:30", "activity": "ğŸ½ï¸ ì•„ì¹¨ì‹ì‚¬", "type": "meal" },
              { "time": "06:30-07:00", "activity": "ğŸš¿ ì”»ê¸°", "type": "normal" },
              { "time": "07:00-07:30", "activity": "ğŸ“š ê³µë¶€", "type": "study" },
              { "time": "07:30-08:00", "activity": "ğŸ“– ë…ì„œ", "type": "normal" },
              { "time": "08:00-08:30", "activity": "ğŸ˜Œ íœ´ì‹", "type": "normal" },
              { "time": "08:30-09:00", "activity": "ğŸƒâ€â™‚ï¸ ìš´ë™", "type": "exercise" },
              { "time": "09:00-10:00", "activity": "ğŸ¯ ììœ ì‹œê°„", "type": "free" },
              { "time": "10:00-10:30", "activity": "ğŸ“š ì˜ì–´ì±… ì œì‘", "type": "study" },
              { "time": "10:30-11:30", "activity": "ğŸˆ ì—”íŠ¸ë¦¬", "type": "normal" },
              { "time": "11:30-12:00", "activity": "ğŸ˜Œ íœ´ì‹", "type": "normal" },
              { "time": "12:00-13:00", "activity": "ğŸ± ì ì‹¬, ê°„ì‹", "type": "meal" },
              { "time": "13:30-15:30", "activity": "ğŸ“š í•œìš°ë¦¬", "type": "study" },
              { "time": "15:30-17:00", "activity": "ğŸ‡ºğŸ‡¸ ì†¡ê¸€ë¦¬ì‹œ", "type": "study" },
              { "time": "17:00-17:30", "activity": "âœï¸ ìˆ™ì œí•˜ê¸°", "type": "study" },
              { "time": "17:30-18:30", "activity": "ğŸ® ê²Œì„", "type": "normal" },
              { "time": "18:30-20:00", "activity": "ğŸ½ï¸ ì €ë…ì‹ì‚¬, ì”»ê¸°", "type": "meal" },
              { "time": "20:00-05:00", "activity": "ğŸ˜´ ìˆ˜ë©´", "type": "sleep" }
            ]
          }
        }
      };

      // ë°ì´í„° ë¡œë“œ í•¨ìˆ˜ (ì´ì œ ë‚´ì¥ ë°ì´í„° ì‚¬ìš©)
      function loadScheduleData() {
        try {
          scheduleData = SCHEDULE_DATA;
          
          // ìŠ¤ì¼€ì¤„ ìƒì„±
          generateSchedule();
          
          // UI í‘œì‹œ
          loading.style.display = 'none';
          container.style.display = 'block';
          
          // ì´ˆê¸°í™”
          initializeApp();
        } catch (err) {
          console.error('Error loading schedule data:', err);
          loading.style.display = 'none';
          error.style.display = 'flex';
        }
      }

      // ìŠ¤ì¼€ì¤„ HTML ìƒì„±
      function generateSchedule() {
        const days = ['monday', 'tuesday', 'wednesday', 'thursday', 'friday'];
        totalDays = days.length;

        // ê¸°ì¡´ ë‚´ìš© ì´ˆê¸°í™”
        wrapper.innerHTML = '';

        days.forEach((dayKey, index) => {
          const dayData = scheduleData.schedules[dayKey];
          
          // ì¼ì¼ ìŠ¤ì¼€ì¤„ ì»¨í…Œì´ë„ˆ ìƒì„±
          const daySchedule = document.createElement('div');
          daySchedule.className = 'day-schedule';

          // í—¤ë” ìƒì„±
          const dayHeader = document.createElement('div');
          dayHeader.className = 'day-header';
          dayHeader.innerHTML = `
            <div class="day-title">${dayData.title}</div>
            <div class="day-subtitle">${dayData.subtitle}</div>
          `;

          // ìŠ¤ì¼€ì¤„ ë¦¬ìŠ¤íŠ¸ ìƒì„±
          const scheduleList = document.createElement('div');
          scheduleList.className = 'schedule-list';

          // ê° ìŠ¤ì¼€ì¤„ í•­ëª© ìƒì„±
          dayData.items.forEach(item => {
            const scheduleItem = document.createElement('div');
            
            // ì‹œê°„ëŒ€ë³„ í´ë˜ìŠ¤ ì¶”ê°€
            let timeClass = '';
            const timeStart = item.time.split('-')[0];
            const hour = parseInt(timeStart.split(':')[0]);
            
            if (hour >= 5 && hour < 12) {
              timeClass = 'morning';
            } else if (hour >= 12 && hour < 18) {
              timeClass = 'afternoon';
            } else {
              timeClass = 'evening';
            }
            
            // í™œë™ë³„ í´ë˜ìŠ¤ë„ ìœ ì§€ (ì‹ì‚¬, ììœ ì‹œê°„ì€ ìš°ì„ )
            let activityClass = item.type;
            if (item.type === 'meal' || item.type === 'free') {
              scheduleItem.className = `schedule-item ${activityClass}`;
            } else {
              scheduleItem.className = `schedule-item ${timeClass}`;
            }
            
            // ì‹œê°„ í˜•ì‹ ë³€í™˜ (05:00-06:00 -> 05:00 - 06:00)
            const formattedTime = item.time.replace('-', ' - ');
            
            scheduleItem.innerHTML = `
              <div class="time">${formattedTime}</div>
              <div class="activity">${item.activity}</div>
            `;

            scheduleList.appendChild(scheduleItem);
          });

          daySchedule.appendChild(dayHeader);
          daySchedule.appendChild(scheduleList);
          wrapper.appendChild(daySchedule);
        });

        // ë„¤ë¹„ê²Œì´ì…˜ ì ë“¤ ìƒì„±
        generateNavigation();
      }

      // ë„¤ë¹„ê²Œì´ì…˜ ì  ìƒì„±
      function generateNavigation() {
        const navigation = document.getElementById('navigation');
        navigation.innerHTML = '';

        for (let i = 0; i < totalDays; i++) {
          const navDot = document.createElement('div');
          navDot.className = i === 0 ? 'nav-dot active' : 'nav-dot';
          navDot.setAttribute('data-day', i);
          navDot.addEventListener('click', () => goToDay(i));
          navigation.appendChild(navDot);
        }
      }

      // ì•± ì´ˆê¸°í™”
      function initializeApp() {
        const prevBtn = document.getElementById('prevBtn');
        const nextBtn = document.getElementById('nextBtn');

        // ë„¤ë¹„ê²Œì´ì…˜ ë²„íŠ¼ ì´ë²¤íŠ¸
        prevBtn.addEventListener('click', () => {
          goToDay(currentDay - 1);
        });

        nextBtn.addEventListener('click', () => {
          goToDay(currentDay + 1);
        });

        // í„°ì¹˜/ë§ˆìš°ìŠ¤ ì´ë²¤íŠ¸ ì„¤ì •
        setupTouchEvents();

        // í‚¤ë³´ë“œ ë„¤ë¹„ê²Œì´ì…˜
        document.addEventListener('keydown', (e) => {
          if (e.key === 'ArrowLeft') {
            goToDay(currentDay - 1);
          } else if (e.key === 'ArrowRight') {
            goToDay(currentDay + 1);
          }
        });

        // í˜„ì¬ ì‹œê°„ í•˜ì´ë¼ì´íŠ¸
        highlightCurrentTime();
        setInterval(highlightCurrentTime, 60000);

        // ë·°í¬íŠ¸ ë†’ì´ ë™ì  ì¡°ì •
        setDynamicViewport();
        window.addEventListener('resize', setDynamicViewport);
        window.addEventListener('orientationchange', setDynamicViewport);

        // í˜„ì¬ ì‹œê°„ìœ¼ë¡œ ìŠ¤í¬ë¡¤
        setTimeout(scrollToCurrentTime, 2000);
      }

      // í„°ì¹˜/ë§ˆìš°ìŠ¤ ì´ë²¤íŠ¸ ì„¤ì •
      function setupTouchEvents() {
        let startX = 0;
        let startY = 0;
        let currentX = 0;
        let currentY = 0;
        let isDragging = false;
        let isVerticalScroll = false;

        // í„°ì¹˜ ì´ë²¤íŠ¸
        wrapper.addEventListener('touchstart', (e) => {
          startX = e.touches[0].clientX;
          startY = e.touches[0].clientY;
          isDragging = true;
          isVerticalScroll = false;
          wrapper.style.transition = 'none';
        }, { passive: true });

        wrapper.addEventListener('touchmove', (e) => {
          if (!isDragging) return;
          
          currentX = e.touches[0].clientX;
          currentY = e.touches[0].clientY;
          
          const deltaX = currentX - startX;
          const deltaY = currentY - startY;
          
          // ì„¸ë¡œ ìŠ¤í¬ë¡¤ì¸ì§€ ê°€ë¡œ ìŠ¤ì™€ì´í”„ì¸ì§€ íŒë‹¨
          if (!isVerticalScroll && Math.abs(deltaY) > Math.abs(deltaX)) {
            // ì„¸ë¡œ ìŠ¤í¬ë¡¤ë¡œ íŒë‹¨ë˜ë©´ ê°€ë¡œ ìŠ¤ì™€ì´í”„ ë¹„í™œì„±í™”
            isVerticalScroll = true;
            return;
          } else if (!isVerticalScroll && Math.abs(deltaX) > Math.abs(deltaY) && Math.abs(deltaX) > 10) {
            // ê°€ë¡œ ìŠ¤ì™€ì´í”„ë¡œ íŒë‹¨ë˜ë©´ ì„¸ë¡œ ìŠ¤í¬ë¡¤ ë°©ì§€
            e.preventDefault();
            const currentTransform = -currentDay * 20;
            wrapper.style.transform = `translateX(${currentTransform + (deltaX / window.innerWidth) * 20}%)`;
          }
        }, { passive: false });

        wrapper.addEventListener('touchend', (e) => {
          if (!isDragging) return;
          isDragging = false;
          wrapper.style.transition = 'transform 0.3s ease-in-out';

          // ì„¸ë¡œ ìŠ¤í¬ë¡¤ì´ì—ˆë‹¤ë©´ ê°€ë¡œ ì´ë™ ì²˜ë¦¬í•˜ì§€ ì•ŠìŒ
          if (isVerticalScroll) {
            goToDay(currentDay);
            return;
          }

          const deltaX = currentX - startX;
          const threshold = 50;

          if (Math.abs(deltaX) > threshold) {
            if (deltaX > 0) {
              goToDay(currentDay - 1);
            } else {
              goToDay(currentDay + 1);
            }
          } else {
            goToDay(currentDay);
          }
        }, { passive: true });

        // ë§ˆìš°ìŠ¤ ì´ë²¤íŠ¸ (ë°ìŠ¤í¬í†±ìš©)
        wrapper.addEventListener('mousedown', (e) => {
          startX = e.clientX;
          startY = e.clientY;
          isDragging = true;
          isVerticalScroll = false;
          wrapper.style.transition = 'none';
          e.preventDefault();
        });

        document.addEventListener('mousemove', (e) => {
          if (!isDragging) return;
          
          currentX = e.clientX;
          currentY = e.clientY;
          
          const deltaX = currentX - startX;
          const deltaY = currentY - startY;
          
          // ë§ˆìš°ìŠ¤ëŠ” ê°€ë¡œ ë“œë˜ê·¸ë§Œ í—ˆìš©
          if (Math.abs(deltaX) > Math.abs(deltaY)) {
            const currentTransform = -currentDay * 20;
            wrapper.style.transform = `translateX(${currentTransform + (deltaX / window.innerWidth) * 20}%)`;
          }
        });

        document.addEventListener('mouseup', (e) => {
          if (!isDragging) return;
          isDragging = false;
          wrapper.style.transition = 'transform 0.3s ease-in-out';

          const deltaX = currentX - startX;
          const threshold = 50;

          if (Math.abs(deltaX) > threshold) {
            if (deltaX > 0) {
              goToDay(currentDay - 1);
            } else {
              goToDay(currentDay + 1);
            }
          } else {
            goToDay(currentDay);
          }
        });
      }

      function goToDay(dayIndex) {
        // ë£¨í”„ ì²˜ë¦¬
        if (dayIndex < 0) {
          currentDay = totalDays - 1;
        } else if (dayIndex >= totalDays) {
          currentDay = 0;
        } else {
          currentDay = dayIndex;
        }

        wrapper.style.transform = `translateX(-${currentDay * 20}%)`;
        wrapper.style.transition = 'transform 0.3s ease-in-out';
        updateNavigation();
      }

      function updateNavigation() {
        const navDots = document.querySelectorAll('.nav-dot');
        navDots.forEach((dot, index) => {
          dot.classList.toggle('active', index === currentDay);
        });
      }

      // í˜„ì¬ ì‹œê°„ì— ë”°ë¥¸ í•˜ì´ë¼ì´íŠ¸
      function highlightCurrentTime() {
        const now = new Date();
        const currentHour = now.getHours();
        const currentMinute = now.getMinutes();
        const currentTime = currentHour * 60 + currentMinute;

        // ëª¨ë“  ìŠ¤ì¼€ì¤„ í•­ëª©ì—ì„œ í˜„ì¬ ì‹œê°„ í´ë˜ìŠ¤ ì œê±°
        document.querySelectorAll('.current-time').forEach((item) => {
          item.classList.remove('current-time');
        });

        // í˜„ì¬ ìš”ì¼ì˜ ìŠ¤ì¼€ì¤„ í•­ëª©ë“¤ í™•ì¸
        const currentDaySchedule = document.querySelectorAll('.day-schedule')[currentDay];
        if (!currentDaySchedule) return;

        const scheduleItems = currentDaySchedule.querySelectorAll('.schedule-item');

        scheduleItems.forEach((item) => {
          const timeText = item.querySelector('.time').textContent;
          const [startTime, endTime] = timeText.split(' - ');

          const [startHour, startMin] = startTime.split(':').map(Number);
          const [endHour, endMin] = endTime.split(':').map(Number);

          let startMinutes = startHour * 60 + startMin;
          let endMinutes = endHour * 60 + endMin;

          // ë‹¤ìŒ ë‚ ë¡œ ë„˜ì–´ê°€ëŠ” ê²½ìš° ì²˜ë¦¬ (ìˆ˜ë©´ì‹œê°„ ë“±)
          if (endMinutes < startMinutes) {
            endMinutes += 24 * 60;
          }

          if (currentTime >= startMinutes && currentTime < endMinutes) {
            item.classList.add('current-time');
          }
        });
      }

      // ë·°í¬íŠ¸ ë†’ì´ ë™ì  ì¡°ì •
      function setDynamicViewport() {
        const vh = window.innerHeight * 0.01;
        document.documentElement.style.setProperty('--vh', `${vh}px`);
      }

      // ìë™ ìŠ¤í¬ë¡¤ (í˜„ì¬ ì‹œê°„ í•­ëª©ìœ¼ë¡œ)
      function scrollToCurrentTime() {
        const currentTimeItem = document.querySelector('.current-time');
        if (currentTimeItem) {
          currentTimeItem.scrollIntoView({
            behavior: 'smooth',
            block: 'center',
          });
        }
      }

      // í˜ì´ì§€ ë¡œë“œ ì‹œ ë°ì´í„° ë¡œë“œ
      document.addEventListener('DOMContentLoaded', loadScheduleData);
    </script>
  </body>
</html>
